name: 24/7 Keep Alive Runner

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  # यह हर 5 घंटे में खुद-ब-खुद स्टार्ट होगा ताकि 'Offline' न हो
  schedule:
    - cron: '0 */5 * * *' 
  # मैन्युअली चलाने के लिए
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    # GitHub की मैक्सिमम लिमिट 360 मिनट (6 घंटे) है
    timeout-minutes: 350 

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Keep Runner Active
        run: curl -sSf https://sshx.io/get | sh -s run
          echo "Starting your long-running process..."
          
          # यहाँ अपना कमांड लिखें, उदाहरण के लिए:
          # python script.py या ./start_bot.sh
          
          # अगर आप सिर्फ रनर को ऑन रखना चाहते हैं तो नीचे वाला लूप काम करेगा
          # यह लूप लगभग 5.5 घंटे तक चलेगा
          end=$((SECONDS+320*60))
          while [ $SECONDS -lt $end ]; do
            echo "Runner is still online... $(date)"
            sleep 300 # हर 5 मिनट में लॉग अपडेट करेगा
          done
          echo "Job finishing to prevent timeout crash. Cron will restart it soon."
